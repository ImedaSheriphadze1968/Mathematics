<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Imeda Algorithm Visualizer</title>
  <style>
    :root {
      --main-bg: #f5f8fc;
      --panel-bg: #ffffff;
      --accent: #0077cc;
      --text: #333333;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--main-bg);
      color: var(--text);
    }
    header {
      background-color: var(--accent);
      color: white;
      padding: 20px;
      text-align: center;
    }
    main {
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    .controls {
      margin: 20px 0;
      text-align: center;
    }
    input, button, select {
      font-size: 1rem;
      padding: 10px;
      margin: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: var(--accent);
      color: white;
      cursor: pointer;
    }
    .stage {
      background-color: var(--panel-bg);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    .highlight {
      background-color: #d0f0ff;
      padding: 3px 6px;
      border-radius: 4px;
    }
    .carry {
      color: red;
      font-weight: bold;
    }
    .final {
      background-color: #e0ffe0;
      padding: 12px;
      border-radius: 8px;
      margin-top: 15px;
      font-weight: bold;
    }
    @media (max-width: 600px) {
      main { padding: 10px; }
      input, button, select { width: 90%; margin-top: 10px; }
    }
  </style>
</head>
<body>
  <header>
    <h1 id="title">ğŸ”¢ Imeda's Carry-Based Algorithm Visualizer</h1>
    <select id="language" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option>
      <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
    </select>
  </header>

  <main>
    <div id="description"></div>

    <div class="controls">
      <input type="text" id="numberInput" placeholder="Enter a number" />
      <button onclick="startAlgorithm()">Start</button>
    </div>

    <div id="output" class="stage"></div>
  </main>

  <script>
    const translations = {
      en: {
        title: "ğŸ”¢ Imeda's Carry-Based Algorithm Visualizer",
        desc: "This visual tool demonstrates how a custom multiplication algorithm works when a number is multiplied by the same-length string of 1's (e.g. 234 Ã— 111, 567234 Ã— 111111). Follow each step: digit breakdown, sum formation, carry propagation and final construction.",
        placeholder: "Enter a number",
        start: "Start",
        steps: {
          digits: "Input Digits",
          sumHeader: "ğŸ“Œ Step 1: Build Sums List",
          carryHeader: "ğŸ” Step 2: Carry Propagation",
          finalHeader: "ğŸ¯ Final Step: Result",
          finalNumber: "Constructed Number:",
          actual: "Actual Multiplication:",
          match: "Match"
        }
      },
      ka: {
        title: "ğŸ”¢ áƒ˜áƒ›áƒ”áƒ“áƒáƒ¡ áƒáƒšáƒ’áƒáƒ áƒ˜áƒ—áƒ›áƒ˜áƒ¡ áƒ•áƒ˜áƒ–áƒ£áƒáƒšáƒ£áƒ áƒ˜ áƒ“áƒ”áƒ›áƒáƒœáƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ",
        desc: "áƒ”áƒ¡ áƒ˜áƒœáƒ¡áƒ¢áƒ áƒ£áƒ›áƒ”áƒœáƒ¢áƒ˜ áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ¡, áƒ áƒáƒ’áƒáƒ  áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ¡ áƒ¡áƒáƒ”áƒªáƒ˜áƒáƒšáƒ£áƒ áƒ˜ áƒ’áƒáƒ›áƒ áƒáƒ•áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒáƒšáƒ’áƒáƒ áƒ˜áƒ—áƒ›áƒ˜, áƒ áƒáƒªáƒ áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜ áƒ›áƒ áƒáƒ•áƒšáƒ“áƒ”áƒ‘áƒ áƒ¨áƒ”áƒ¡áƒáƒ‘áƒáƒ›áƒ˜áƒ¡áƒ˜ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ˜áƒ¡ áƒ”áƒ áƒ—áƒ˜áƒáƒœáƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ˜áƒ›áƒ“áƒ”áƒ•áƒ áƒáƒ‘áƒáƒ–áƒ” (áƒ›áƒáƒ’. 234 Ã— 111, 567234 Ã— 111111). áƒ˜áƒ®áƒ˜áƒšáƒ”áƒ— áƒ—áƒ˜áƒ—áƒáƒ”áƒ£áƒšáƒ˜ áƒœáƒáƒ‘áƒ˜áƒ¯áƒ˜: áƒªáƒ˜áƒ¤áƒ áƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ¨áƒšáƒ, áƒ¯áƒáƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ, áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒ˜áƒœáƒáƒ›áƒ˜áƒ™áƒ áƒ“áƒ áƒ¡áƒáƒ‘áƒáƒšáƒáƒ áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜áƒ¡ áƒáƒ’áƒ”áƒ‘áƒ.",
        placeholder: "áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜",
        start: "áƒ“áƒáƒ¬áƒ§áƒ”áƒ‘áƒ",
        steps: {
          digits: "áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ˜áƒšáƒ˜ áƒªáƒ˜áƒ¤áƒ áƒ”áƒ‘áƒ˜",
          sumHeader: "ğŸ“Œ áƒœáƒáƒ‘áƒ˜áƒ¯áƒ˜ 1: áƒ¯áƒáƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ",
          carryHeader: "ğŸ” áƒœáƒáƒ‘áƒ˜áƒ¯áƒ˜ 2: áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ”áƒ‘áƒ˜áƒ¡ áƒáƒ áƒáƒªáƒ”áƒ¡áƒ˜",
          finalHeader: "ğŸ¯ áƒœáƒáƒ‘áƒ˜áƒ¯áƒ˜ 3: áƒ¡áƒáƒ‘áƒáƒšáƒáƒ áƒ¨áƒ”áƒ“áƒ”áƒ’áƒ˜",
          finalNumber: "áƒáƒ’áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜:",
          actual: "áƒ áƒ”áƒáƒšáƒ£áƒ áƒ˜ áƒ’áƒáƒ›áƒ áƒáƒ•áƒšáƒ”áƒ‘áƒ:",
          match: "áƒ¨áƒ”áƒ“áƒáƒ áƒ”áƒ‘áƒ"
        }
      },
      ru: {
        title: "ğŸ”¢ Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ° Ğ˜Ğ¼ĞµĞ´Ñ‹",
        desc: "Ğ­Ñ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚, ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ ÑƒĞ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ, ĞºĞ¾Ğ³Ğ´Ğ° Ñ‡Ğ¸ÑĞ»Ğ¾ ÑƒĞ¼Ğ½Ğ¾Ğ¶Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ĞµĞ´Ğ¸Ğ½Ğ¸Ñ† Ñ‚Ğ¾Ğ¹ Ğ¶Ğµ Ğ´Ğ»Ğ¸Ğ½Ñ‹ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, 234 Ã— 111, 567234 Ã— 111111). Ğ¡Ğ»ĞµĞ´ÑƒĞ¹Ñ‚Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ ÑˆĞ°Ğ³Ñƒ: Ñ€Ğ°Ğ·Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ†Ğ¸Ñ„Ñ€, Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑƒĞ¼Ğ¼, Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑÑ‹ Ğ¸ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°.",
        placeholder: "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾",
        start: "ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ",
        steps: {
          digits: "Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ‹Ğµ Ñ†Ğ¸Ñ„Ñ€Ñ‹",
          sumHeader: "ğŸ“Œ Ğ¨Ğ°Ğ³ 1: Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑƒĞ¼Ğ¼",
          carryHeader: "ğŸ” Ğ¨Ğ°Ğ³ 2: ĞŸĞµÑ€ĞµĞ½Ğ¾ÑÑ‹",
          finalHeader: "ğŸ¯ Ğ¨Ğ°Ğ³ 3: Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚",
          finalNumber: "ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾:",
          actual: "Ğ¤Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:",
          match: "Ğ¡Ğ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğµ"
        }
      }
    };

    let currentLang = 'en';

    function changeLanguage() {
      currentLang = document.getElementById('language').value;
      const t = translations[currentLang];
      document.getElementById('title').innerText = t.title;
      document.getElementById('description').innerText = t.desc;
      document.getElementById('numberInput').placeholder = t.placeholder;
      document.querySelector("button").innerText = t.start;
      document.getElementById("output").innerHTML = "";
    }

    function startAlgorithm() {
      const numStr = document.getElementById("numberInput").value.trim();
      const t = translations[currentLang].steps;
      if (!/^\d+$/.test(numStr)) {
        alert("Invalid number");
        return;
      }
      const digits = numStr.split('').map(Number);
      const n = digits.length;
      const output = document.getElementById("output");
      output.innerHTML = `<h3>${t.digits}</h3><p>${digits.join(', ')}</p>`;

      let sums = [];
      output.innerHTML += `<h3>${t.sumHeader}</h3>`;
      for (let k = 1; k <= n; k++) {
        let slice = digits.slice(0, k);
        let s = slice.reduce((a,b)=>a+b, 0);
        sums.push(s);
        output.innerHTML += `<p>s<sub>${k}</sub> = ${slice.join('+')} = <span class='highlight'>${s}</span></p>`;
      }
      for (let k = 1; k < n; k++) {
        let slice = digits.slice(k);
        let s = slice.reduce((a,b)=>a+b, 0);
        sums.push(s);
        output.innerHTML += `<p>s<sub>${n + k}</sub> = ${slice.join('+')} = <span class='highlight'>${s}</span></p>`;
      }

      output.innerHTML += `<h3>${t.carryHeader}</h3>`;
      let result = new Array(sums.length).fill(0);
      let carry = 0;
      for (let i = sums.length - 1; i >= 0; i--) {
        let total = sums[i] + carry;
        result[i] = total % 10;
        let newCarry = Math.floor(total / 10);
        output.innerHTML += `<p>s[${i+1}] + carry(${carry}) = ${total} â†’ digit = <span class='highlight'>${result[i]}</span>, <span class='carry'>carry = ${newCarry}</span></p>`;
        carry = newCarry;
      }

      const finalNumber = result.join('');
      const actual = BigInt(numStr) * BigInt('1'.repeat(n));

      output.innerHTML += `<h3>${t.finalHeader}</h3>`;
      output.innerHTML += `<div class='final'>${t.finalNumber} ${finalNumber}</div>`;
      output.innerHTML += `<p>${t.actual} ${numStr} Ã— ${'1'.repeat(n)} = ${actual}</p>`;
      output.innerHTML += `<p>${t.match}: ${finalNumber === actual.toString() ? 'âœ… YES' : 'âŒ NO'}</p>`;
    }

    window.onload = changeLanguage;
  </script>
</body>
</html>
